{% load utils %}
{% if not submit.tested %}
<div class="alert alert-info">
    <span class="glyphicon glyphicon-refresh glyphicon-animate-rotate"></span>
    Tento program čaká na otestovanie
</div>
{% endif %}

{% if protocolReady %}
    {% if compileLogPresent %}
        <h4>Výstup z kompilátora</h4>
        <pre>{{ compileLog }}</pre>
    {% endif %}
    {% if have_tests %}
        {% for test in tests %}
            {% ifchanged test.set %}
            {% if not forloop.first %}</div>{% endif %}

            <div class="protocol-set">
                <div class="protocol-box">
                    <span class="protocol-set-name">
                        {% if test.set == '00' %}
                            sample
                        {% else %}
                            {{ test.set }}
                        {% endif %}
                    </span>
                    <span class="protocol-set-result">{{ test_sets_verbose|lookup:test.set }}</span>
                </div>
            {% endifchanged %}

            <div class="protocol-box protocol-{%if test.result == "OK" %}ok{% elif test.result == "IGN" %}ign{% elif test.result == "WA" %}wa{% else %}tle{% endif %}"
                data-input="{{ test.name }}"
                data-result="{{ submit_verbose_response|lookup:test.result }}"
                data-has-details="{{ test.showDetails }}">
                <span class="protocol-result">{{ test.result }}</span>
                <span class="protocol-time">{{ test.time }} ms</span>
            </div>

            {% if forloop.last %}</div>{% endif %}
        {% endfor %}

        <br>

        {% for test in tests %}
            {% if test.showDetails %}
                <div id="details-{{ test.name }}">
                    Porovnanie výstupov pre <b>{{ test.name }}</b>:
                    <pre><samp>{{ test.details }}</samp></pre>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
{% else %}
    Protokol testovania nie je dostupný
{% endif %}
